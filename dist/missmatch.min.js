/*! missmatch 2014-04-21 */
var mm={version:"0.1.2"};mm.makeParser=function(a){"use strict";function b(){return a[A++]}function c(){return A<a.length}function d(){A++}function e(){return a[A]}function f(){for(;" "===e();)d()}function g(a){var b=!a;return function(){return b==!a?b=!b:!a}}function h(a,b){var c={type:a,nodes:[],binding:!1};return b.push(c),c}function i(a,b){return b?/[a-zA-Z$_]/.test(a):/[0-9a-zA-Z$_]/.test(a)}function j(a){return/[0-9eE\+\-\.]/.test(a)}function k(a){throw"Unexpected token at index "+A+" expected '"+a+"' but found "+(e()||"''")}function l(a){d();for(var f=[],h=g(!0);c()&&i(e(),h());)f[f.length]=b();if(!(f.length>0))throw"No binding name given at "+A+" for "+a.type;a.binding=f.join("")}function m(a){if(d(),")"===e())return void(a.type="()");for(;;){if("|"===e())break;if(f(),z(a.nodes),f(),","!==e())break;d()}}function n(a){var g,i=h(b(),a);if(c()){switch(e()){case"@":return void l(i);case"(":m(i);break;default:return}"|"===e()&&(g=h(b(),i.nodes),f(),"@"===e()&&(l(g),f())),")"!==e()?k(")"):(d(),c()&&"@"===e()&&l(i))}}function o(a,f){d();for(var j,k=[],m=g(!0);c()&&i(e(),m());)k[k.length]=b();if(!(k.length>0))throw"No property name given at "+A+" for "+a.type;j=h(f?":":".",a.nodes),j.name=k.join(""),c()&&":"===e()&&(d(),z(j.nodes)),c()&&"@"===e()&&l(j)}function p(a){for(d();;){if(f(),"."===e()?o(a,!1):":"===e()?o(a,!0):k(". or :"),f(),","!==e())break;d()}}function q(a){var f=h(b(),a);if(c()){switch(e()){case"@":return void l(f);case"(":p(f);break;default:return}")"!==e()?k(")"):(d(),c()&&"@"===e()&&l(f))}}function r(a,b){for(d();;){if(f(),b(a),f(),","!==e())break;d()}}function s(){var a=[],f=b();if('"'!==f&&"'"!==f)throw"Unexpected token at index "+A+" expected 'string' but found "+f;for(;c()&&e()!==f;)a[a.length]=b();return d(),a.join("")}function t(){var a=[];for(d();c()&&"/"!==e();)a[a.length]=b();return d(),new RegExp(a.join(""))}function u(a){"/"===e()?h(t(),h("r=",a).nodes):h(s(),h("=",a).nodes)}function v(a){for(var d,f=[];c()&&j(e());)f[f.length]=b();d=parseFloat(f.join("")),!isNaN(d)&&isFinite(d)?h(d,h("=",a).nodes):k("numeric")}function w(a){for(var d=[],f=/[a-z]/;c()&&f.test(e());)d[d.length]=b();d=d.join(""),"true"===d||"false"===d?h("t"===d[0]?!0:!1,h("=",a).nodes):k("boolean")}function x(a){var b=s(),c=new Date(b);isNaN(c.getTime())?k("date"):h(c,h("d=",a).nodes)}function y(a,c){var f=h(b(),a);if("("===e()){switch(c){case"s":r(f.nodes,u);break;case"n":r(f.nodes,v);break;case"b":r(f.nodes,w);break;case"d":r(f.nodes,x)}f.type="||",d()}"@"===e()&&l(f)}function z(a){if(c())switch(e()){case"a":n(a);break;case"o":q(a);break;default:/[nsSbfdr_]/.test(e())?y(a,e()):k("one of (a,o,n,s,S,b,f,d,r,_)")}return a}var A=0;return{parse:function(){if(!a||!a.length)throw"Cannot parse empty pattern";var b=z([]);if(f(),A!==a.length)throw"Expected end of input but tokens found: "+a.substring(A);return b}}},mm.makeCompiler=function(a){"use strict";function b(a,b){return function(c){return a.apply(u,b.concat([c]))}}function c(a,b){return Object.prototype.toString.call(a)===b}function d(a,b,c){var d=b(c);if(d.result){if(u.hasOwnProperty(a))throw"Name '"+a+"' is already used in another binding.";u[a]=d.obj?d.obj[d.param]:d.param}return d.this_binding=a,d}function e(a){return{result:!0,param:a}}function f(a){return{result:!0,param:a,rest:!0}}function g(a){return{result:0===a.length,param:a}}function h(a,b){return{result:a===b,param:a}}function i(a,b){return{result:a.test(b),param:a}}function j(a,b){return{result:a.getTime()===b.getTime(),param:a}}function k(a,b){return{result:c(b,a),param:b}}function l(a,b){return{result:typeof b===a,param:b}}function m(a){return{result:"string"==typeof a&&a,param:a}}function n(a,b,c,d){return{result:a.length?d&&a[0](c[b]).result:d,param:b,obj:c}}function o(a,b,c){return n(a,b,c,c.hasOwnProperty(b))}function p(a,b,c){return n(a,b,c,b in c)}function q(a,b){var c,d={result:!1,param:b};for(c=0;c<a.length;c++)if(a[c](b).result){d.result=!0;break}return d}function r(a,b){var d,e,f,g,h,i,j=0,k=!1,l=[],m={result:!1,param:b};if(!c(b,"[object Array]")||a.length>b.length)return m;if(0===a.length)return m.result=!0,m;for(e=0;e<b.length;e++){if(f=a[e],g=b[e],!f)return m;if(h=f(g),!h.result)return m;if(h.rest){d=h,j=e,k=!0;break}}if(k&&d.this_binding){for(i=j;i<b.length;i++)l[l.length]=b[i];u[d.this_binding]=l}return m.result=!0,m}function s(a,b){var d,e={result:!0,param:b};if(c(b,"[object Array]"))return e.result=!1,e;if("object"!=typeof b)return e.result=!1,e;for(d=0;d<a.length;d++)if(!a[d](b).result)return e.result=!1,e;return e}function t(a){var c,n,u,v=[];for(c=0;c<a.length;c++){switch(n=a[c],n.type){case"a":u=b(r,[t(n.nodes)]);break;case"o":u=b(s,[t(n.nodes)]);break;case".":u=b(o,[t(n.nodes),n.name]);break;case":":u=b(p,[t(n.nodes),n.name]);break;case"=":u=b(h,[n.nodes[0].type]);break;case"d=":u=b(j,[n.nodes[0].type]);break;case"r=":u=b(i,[n.nodes[0].type]);break;case"||":u=b(q,[t(n.nodes)]);break;case"n":u=b(l,["number"]);break;case"s":u=b(l,["string"]);break;case"S":u=m;break;case"b":u=b(l,["boolean"]);break;case"f":u=b(l,["function"]);break;case"_":u=e;break;case"|":u=f;break;case"()":u=g;break;case"d":u=b(k,["[object Date]"]);break;case"r":u=b(k,["[object RegExp]"]);break;default:throw"Unknown AST entity: "+n.type}n.binding&&(u=b(d,[n.binding,u])),v[v.length]=u}return v}var u={};return{compile:function(){var b=t(a)[0];return function(a){return u={},{result:b(a).result,context:u}}}}},mm.target="undefined"==typeof window&&exports?exports:mm,mm.target.version==mm.version,mm.target.match=function(){"use strict";function a(a){var b,c={};if(a.length%2!==0)throw"Missing handler for pattern";for(b=0;b<a.length;b+=2)c[a[b]]=a[b+1];return c}function b(b,g){"[object Array]"==={}.toString.call(g)&&(g=a(g));var h,i;for(h in g)if(g.hasOwnProperty(h)&&(f.hasOwnProperty(h)?c=f[h]:(d=mm.makeParser(h).parse(),c=mm.makeCompiler(d).compile(),f[h]=c),i=c(b),i.result))return e=g[h],"function"==typeof e?e.call(i.context):e;throw"Non-exhaustive patterns"}var c,d,e,f={};return function(a,c){return b(a,c)}}(),mm.target.compile=function(a){"use strict";return mm.makeCompiler(mm.makeParser(a).parse()).compile()},mm.target.matchJSON=function(a,b){"use strict";return mm.match(JSON.parse(a),b)},mm.target.matchArgs=function(a){"deprecated";var b=arguments.callee.caller.arguments;return mm.match(Array.prototype.slice.call(b),a)};